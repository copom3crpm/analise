<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Especifica√ß√µes T√©cnicas - Melhorias Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #ecf0f1;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .badge {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .subsection {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .subsection h3 {
            color: #34495e;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .requirement {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .requirement strong {
            color: #e74c3c;
            font-size: 1.05rem;
        }

        .code-block {
            background: #2c3e50;
            color: #2ecc71;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            overflow-x: auto;
            margin: 15px 0;
        }

        .visual-example {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 6px 16px rgba(46, 204, 113, 0.3);
        }

        .visual-example .big-number {
            font-size: 4rem;
            font-weight: 800;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .visual-example .label {
            font-size: 1.3rem;
            margin-top: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checklist li:before {
            content: "‚úì";
            background: #2ecc71;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .alert {
            background: #fff3cd;
            border-left: 4px solid #f1c40f;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .alert-danger {
            background: #f8d7da;
            border-left-color: #e74c3c;
        }

        .mobile-preview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .device-frame {
            background: #34495e;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .device-screen {
            background: white;
            border-radius: 8px;
            padding: 10px;
            min-height: 200px;
        }

        .priority-high {
            color: #e74c3c;
            font-weight: bold;
        }

        .priority-medium {
            color: #f39c12;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .content {
                padding: 20px;
            }

            .mobile-preview {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã Especifica√ß√µes T√©cnicas</h1>
            <p>Dashboard de Homic√≠dios - 3¬™ RISP | Melhorias e Responsividade</p>
        </div>

        <div class="content">
            <!-- Se√ß√£o 1: Card de Dias sem Homic√≠dio -->
            <div class="section">
                <h2 class="section-title">
                    <span>üéØ</span> Altera√ß√£o #1: Card "Dias sem Homic√≠dio na 3¬™ RISP"
                    <span class="badge">PRIORIDADE ALTA</span>
                </h2>

                <div class="subsection">
                    <h3>üìù Descri√ß√£o da Funcionalidade</h3>
                    <p>Criar um card em destaque na p√°gina inicial que exiba dinamicamente o n√∫mero de dias desde o √∫ltimo homic√≠dio registrado em toda a 3¬™ RISP.</p>
                </div>

                <div class="subsection">
                    <h3>üé® Especifica√ß√£o Visual</h3>
                    
                    <div class="visual-example">
                        <div class="big-number" id="demoCounter">5</div>
                        <div class="label">Dias sem Homic√≠dio na 3¬™ RISP</div>
                        <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.9;">√öltimo registro: 09/10/2025</div>
                    </div>

                    <div class="requirement">
                        <strong>Posicionamento:</strong> O card deve aparecer como primeiro item na grid de KPIs, ocupando toda a largura (grid-column: 1 / -1)
                    </div>

                    <div class="requirement">
                        <strong>Estilo Visual:</strong>
                        <ul class="checklist">
                            <li>Background gradient verde vibrante (#2ecc71 ‚Üí #27ae60)</li>
                            <li>Texto branco com sombra sutil para melhor legibilidade</li>
                            <li>N√∫mero grande e destacado (4rem, peso 800)</li>
                            <li>Anima√ß√£o pulsante suave no background</li>
                            <li>Box-shadow com cor verde semi-transparente</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3>‚öôÔ∏è L√≥gica de C√°lculo</h3>
                    
                    <div class="requirement">
                        <strong>F√≥rmula:</strong> Dias = Data Atual - √öltima Data de Homic√≠dio - 1 dia
                    </div>

                    <div class="code-block">
// Fun√ß√£o para calcular dias sem homic√≠dio na RISP
function calcularDiasSemHomicidioRISP(dados) {
    const hoje = new Date();
    hoje.setHours(0, 0, 0, 0);
    
    // Pegar todos os homic√≠dios e ordenar por data
    const todasDatas = dados
        .filter(i => i['Data do fato'] instanceof Date)
        .map(i => i['Data do fato'])
        .sort((a, b) => b.getTime() - a.getTime());
    
    if (todasDatas.length === 0) return 0;
    
    const ultimaData = new Date(todasDatas[0]);
    ultimaData.setHours(0, 0, 0, 0);
    
    // Calcula diferen√ßa em dias
    const diff = Math.floor((hoje - ultimaData) / (1000 * 60 * 60 * 24));
    
    return diff >= 0 ? diff : 0;
}
                    </div>

                    <div class="alert">
                        <strong>‚ö†Ô∏è Importante:</strong> O c√°lculo N√ÉO deve contar o dia do √∫ltimo homic√≠dio. Se o √∫ltimo foi em 09/10 e hoje √© 10/10, o resultado √© 1 dia (n√£o 0).
                    </div>
                </div>

                <div class="subsection">
                    <h3>üíª Implementa√ß√£o HTML/CSS</h3>
                    
                    <div class="requirement">
                        <strong>Localiza√ß√£o no HTML:</strong> Inserir dentro da div com classe <code>kpi-container</code>, como primeiro elemento
                    </div>

                    <div class="code-block">
&lt;!-- Adicionar ap√≥s &lt;div class="kpi-container"&gt; --&gt;
&lt;div class="kpi-card-destaque"&gt;
    &lt;div id="kpi-dias-risp" class="value"&gt;0&lt;/div&gt;
    &lt;div class="label"&gt;Dias sem Homic√≠dio na 3¬™ RISP&lt;/div&gt;
    &lt;div class="sublabel" id="kpi-ultima-data-risp"&gt;
        √öltimo registro: --
    &lt;/div&gt;
&lt;/div&gt;
                    </div>

                    <div class="requirement">
                        <strong>CSS Necess√°rio:</strong> J√° existe a classe <code>.kpi-card-destaque</code> no c√≥digo atual. Verificar se inclui:
                        <ul class="checklist">
                            <li>Grid-column: 1 / -1 (ocupa largura total)</li>
                            <li>Padding aumentado (30px)</li>
                            <li>Border-radius maior (12px)</li>
                            <li>Anima√ß√£o @keyframes pulse</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3>üîÑ Atualiza√ß√£o Din√¢mica</h3>
                    
                    <div class="requirement">
                        <strong>Trigger de Atualiza√ß√£o:</strong> A fun√ß√£o deve ser chamada em:
                        <ul class="checklist">
                            <li>Carregamento inicial dos dados (ap√≥s processData)</li>
                            <li>Cada aplica√ß√£o de filtros (dentro de updateKPIs)</li>
                            <li>Reset de filtros</li>
                        </ul>
                    </div>

                    <div class="code-block">
// Adicionar na fun√ß√£o updateKPIs()
function updateKPIs(data) {
    const total = data.length;
    const resolvidos = data.filter(d => 
        d.Resolu√ß√£oNormalizada === 'Sim'
    ).length;
    
    // ... c√≥digo existente ...
    
    // NOVO: Atualizar dias sem homic√≠dio RISP
    const diasRISP = calcularDiasSemHomicidioRISP(fullData);
    document.getElementById('kpi-dias-risp')
        .textContent = diasRISP;
    
    // Atualizar √∫ltima data
    const ultimaData = getUltimaDataRISP(fullData);
    document.getElementById('kpi-ultima-data-risp')
        .textContent = `√öltimo registro: ${ultimaData}`;
}
                    </div>
                </div>

                <div class="subsection">
                    <h3>üé® Estados Visuais Condicionais</h3>
                    
                    <div class="requirement">
                        <strong>C√≥digo de Cores baseado em dias:</strong>
                        <ul class="checklist">
                            <li><span class="priority-high">VERMELHO</span>: Menos de 3 dias (status-danger)</li>
                            <li><span class="priority-medium">AMARELO</span>: 3 a 6 dias (status-warning)</li>
                            <li><span style="color: #2ecc71; font-weight: bold;">VERDE</span>: 7 dias ou mais (padr√£o)</li>
                        </ul>
                    </div>

                    <div class="code-block">
// Adicionar l√≥gica de cores
const cardDestaque = document.getElementById('kpi-risp-destaque');
cardDestaque.classList.remove('status-warning', 'status-danger');

if (diasRISP < 3) {
    cardDestaque.classList.add('status-danger');
} else if (diasRISP < 7) {
    cardDestaque.classList.add('status-warning');
}
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o 2: Responsividade Mobile -->
            <div class="section">
                <h2 class="section-title">
                    <span>üì±</span> Altera√ß√£o #2: Responsividade para Smartphones
                    <span class="badge">PRIORIDADE ALTA</span>
                </h2>

                <div class="subsection">
                    <h3>üéØ Objetivo</h3>
                    <p>Garantir que o dashboard seja totalmente funcional e visualmente agrad√°vel em dispositivos m√≥veis (smartphones e tablets).</p>
                </div>

                <div class="subsection">
                    <h3>üìê Breakpoints Definidos</h3>
                    
                    <div class="requirement">
                        <strong>Breakpoint Principal:</strong> 768px (tablets e smartphones)
                    </div>

                    <div class="requirement">
                        <strong>Breakpoint Secund√°rio:</strong> 480px (smartphones pequenos)
                    </div>

                    <div class="mobile-preview">
                        <div class="device-frame">
                            <div class="device-screen">
                                <div style="font-size: 0.8rem; color: #7f8c8d; text-align: center; padding: 10px;">
                                    <strong>Tablet (‚â§768px)</strong><br>
                                    ‚Ä¢ Sidebar horizontal<br>
                                    ‚Ä¢ Grid 1 coluna<br>
                                    ‚Ä¢ Filtros empilhados
                                </div>
                            </div>
                        </div>
                        <div class="device-frame">
                            <div class="device-screen">
                                <div style="font-size: 0.8rem; color: #7f8c8d; text-align: center; padding: 10px;">
                                    <strong>Mobile (‚â§480px)</strong><br>
                                    ‚Ä¢ Textos reduzidos<br>
                                    ‚Ä¢ N√∫meros menores<br>
                                    ‚Ä¢ Gr√°ficos otimizados
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3>üîß Modifica√ß√µes Necess√°rias - Layout Geral</h3>
                    
                    <div class="requirement">
                        <strong>1. Sidebar (Navega√ß√£o)</strong>
                        <div class="code-block">
@media (max-width: 768px) {
    .dashboard-container {
        flex-direction: column; /* Vertical */
    }
    
    .sidebar {
        width: 100%;
        position: sticky;
        top: 0;
        z-index: 100;
    }
    
    .sidebar ul {
        display: flex;
        overflow-x: auto; /* Scroll horizontal */
        white-space: nowrap;
    }
    
    .sidebar ul li {
        display: inline-block;
    }
}
                        </div>
                    </div>

                    <div class="requirement">
                        <strong>2. Cards KPI</strong>
                        <div class="code-block">
@media (max-width: 768px) {
    .kpi-container {
        grid-template-columns: 1fr; /* 1 coluna */
        gap: 15px;
    }
    
    .kpi-card-destaque {
        padding: 25px 20px;
        grid-column: 1; /* Remove span completo */
    }
    
    .kpi-card-destaque .value {
        font-size: 3rem; /* Reduz de 4rem */
    }
}
                        </div>
                    </div>

                    <div class="requirement">
                        <strong>3. Filtros</strong>
                        <div class="code-block">
@media (max-width: 768px) {
    .filters {
        grid-template-columns: 1fr; /* Empilha filtros */
    }
    
    .filter-buttons {
        flex-direction: column; /* Bot√µes empilhados */
    }
    
    .filter-buttons button {
        width: 100%; /* Largura total */
    }
}
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3>üìä Modifica√ß√µes - Gr√°ficos e Visualiza√ß√µes</h3>
                    
                    <div class="requirement">
                        <strong>4. Grid de Gr√°ficos</strong>
                        <div class="code-block">
@media (max-width: 768px) {
    .chart-grid {
        grid-template-columns: 1fr; /* 1 coluna */
    }
    
    .chart-card.full-width {
        grid-column: 1; /* Remove span */
    }
    
    .chart-container {
        height: 280px; /* Reduz altura */
    }
    
    .chart-container-large {
        height: 350px;
    }
}
                        </div>
                    </div>

                    <div class="requirement">
                        <strong>5. Widget "Dias sem Homic√≠dio"</strong>
                        <div class="code-block">
@media (max-width: 768px) {
    .dias-sem-homicidio-widget {
        grid-template-columns: 1fr; /* Vertical */
    }
    
    .dias-display {
        flex-direction: column;
        text-align: center;
    }
    
    .dias-numero {
        text-align: center;
    }
    
    .dias-valor {
        font-size: 2.5rem; /* Reduz de 3.5rem */
    }
}
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3>‚úÖ Checklist de Testes Mobile</h3>
                    <ul class="checklist">
                        <li>Navega√ß√£o horizontal funciona suavemente na sidebar</li>
                        <li>Todos os cards KPI s√£o vis√≠veis e leg√≠veis</li>
                        <li>Card destaque mant√©m destaque visual em mobile</li>
                        <li>Filtros s√£o acess√≠veis e f√°ceis de usar</li>
                        <li>Gr√°ficos renderizam corretamente (sem cortes)</li>
                        <li>Bot√µes de exporta√ß√£o s√£o clic√°veis</li>
                        <li>Texto n√£o ultrapassa largura da tela</li>
                        <li>Touch targets t√™m m√≠nimo 44x44px</li>
                        <li>Scroll funciona em todos os containers</li>
                        <li>Performance mant√©m-se fluida (sem lag)</li>
                    </ul>
                </div>

                <div class="alert alert-danger">
                    <strong>üö® Aten√ß√£o Cr√≠tica:</strong> Testar em dispositivos reais, n√£o apenas no DevTools do navegador. Comportamentos de scroll e touch podem diferir.
                </div>
            </div>

            <!-- Se√ß√£o 3: Cronograma e Prioridades -->
            <div class="section">
                <h2 class="section-title">
                    <span>‚è±Ô∏è</span> Cronograma de Implementa√ß√£o
                </h2>

                <div class="subsection">
                    <h3>üìÖ Fase 1: Card Dias sem Homic√≠dio (2-3 horas)</h3>
                    <ul class="checklist">
                        <li>Criar estrutura HTML do card</li>
                        <li>Implementar fun√ß√£o de c√°lculo</li>
                        <li>Integrar com updateKPIs</li>
                        <li>Adicionar estados visuais condicionais</li>
                        <li>Testar com diferentes cen√°rios de dados</li>
                    </ul>
                </div>

                <div class="subsection">
                    <h3>üìÖ Fase 2: Responsividade Mobile (3-4 horas)</h3>
                    <ul class="checklist">
                        <li>Implementar media queries base (768px)</li>
                        <li>Ajustar layout de sidebar e navega√ß√£o</li>
                        <li>Adaptar grids de KPIs e gr√°ficos</li>
                        <li>Otimizar widget de dias sem homic√≠dio</li>
                        <li>Implementar media queries para mobile pequeno (480px)</li>
                        <li>Realizar testes em m√∫ltiplos dispositivos</li>
                        <li>Ajustes finos de UX/UI</li>
                    </ul>
                </div>

                <div class="alert">
                    <strong>üí° Dica:</strong> Implementar e testar cada altera√ß√£o separadamente antes de integrar ambas. Isso facilita identifica√ß√£o de bugs.
                </div>
            </div>

            <!-- Se√ß√£o 4: Considera√ß√µes T√©cnicas -->
            <div class="section">
                <h2 class="section-title">
                    <span>‚öôÔ∏è</span> Considera√ß√µes T√©cnicas Adicionais
                </h2>

                <div class="subsection">
                    <h3>üîç Valida√ß√£o de Dados</h3>
                    <div class="requirement">
                        <strong>Cen√°rios a considerar:</strong>
                        <ul class="checklist">
                            <li>Base de dados vazia (nenhum registro)</li>
                            <li>√öltimo homic√≠dio h√° muito tempo (>365 dias)</li>
                            <li>Homic√≠dio no dia atual (dia 0)</li>
                            <li>Dados com datas futuras (erro de entrada)</li>
                            <li>Filtros que retornam conjunto vazio</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3>üé® Acessibilidade</h3>
                    <div class="requirement">
                        <strong>Garantir:</strong>
                        <ul class="checklist">
                            <li>Contraste m√≠nimo de 4.5:1 para textos</li>
                            <li>Tamanho de fonte leg√≠vel (m√≠nimo 14px em mobile)</li>
                            <li>Touch targets de 44x44px (recomenda√ß√£o Apple/Google)</li>
                            <li>Navega√ß√£o por teclado funcional</li>
                            <li>Atributos ARIA onde apropriado</li>
                        </ul>
                    </div>
                </div>

                <div class="subsection">
                    <h3>‚ö° Performance</h3>
                    <div class="requirement">
                        <strong>Otimiza√ß√µes recomendadas:</strong>
                        <ul class="checklist">
                            <li>Lazy loading para gr√°ficos n√£o vis√≠veis</li>
                            <li>Debounce em filtros (300ms)</li>
                            <li>Memoiza√ß√£o de c√°lculos pesados</li>
                            <li>Evitar re-renders desnecess√°rios</li>
                            <li>Comprimir imagens/assets se houver</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Anima√ß√£o do contador demo
        let counter = 5;
        setInterval(() => {
            counter = (counter % 30) + 1;
            document.getElementById('demoCounter').textContent = counter;
        }, 2000);
    </script>
</body>
</html>
